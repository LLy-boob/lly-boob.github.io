<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#2c3f51">

  <!-- Primary SEO -->
  <title>Block Blaster ‚Äî Free Online Block Puzzle Game | Play Instantly</title>
  <meta name="description" content="Play Block Blaster ‚Äî the ultimate free online block puzzle game! Instantly playable on mobile & desktop. No download, addictive fun, UK Drill music, and simple controls.">
  <link rel="canonical" href="https://lly-boob.github.io/">

  <!-- Favicon & App Icons -->
  <link rel="icon" href="https://lly-boob.github.io/favicon.png?v=2" sizes="32x32">
  <link rel="icon" href="https://lly-boob.github.io/favicon.png?v=2" sizes="192x192">
  <link rel="apple-touch-icon" href="https://lly-boob.github.io/favicon.png?v=2">

  <!-- Manifest for PWA -->
  <link rel="manifest" href="manifest.json">

  <!-- Google Site Verification -->
  <meta name="google-site-verification" content="gZ3LD9X67kObs3lh5Ix7KD9vnSki8VLa6ZONdvCPIxE" />

  <!-- Monetization -->
<meta name="monetag" content="ef7c500bcbab5c68feaab4175d9cfc13">

	

  <!-- Open Graph for Social Sharing -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Block Blaster ‚Äî Free Online Block Game">
  <meta property="og:description" content="Fast, addictive block puzzle game like Candy Crush. Play now on mobile or desktop ‚Äî no download required, UK Drill music included.">
  <meta property="og:url" content="https://lly-boob.github.io/">
  <meta property="og:image" content="https://lly-boob.github.io/og-image.png">
  <meta property="og:image:alt" content="Block Blaster gameplay screenshot with colorful blocks">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Block Blaster ‚Äî Free Online Block Game">
  <meta name="twitter:description" content="Play Block Blaster ‚Äî addictive block puzzle game online. Instant play on mobile & desktop. UK Drill soundtrack included.">
  <meta name="twitter:image" content="https://lly-boob.github.io/
	  /og-image.png">

  <!-- JSON-LD structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebSite",
        "@id": "https://lly-boob.github.io/#website",
        "url": "https://lly-boob.github.io/",
        "name": "Block Blaster",
        "description": "Play Block Blaster ‚Äî a fast, addictive block puzzle game played in the browser with UK Drill music.",
        "publisher": {
          "@type": "Organization",
          "name": "LLydra"
        }
      },
      {
        "@type": "Game",
        "name": "Block Blaster",
        "url": "https://lly-boob.github.io/",
        "description": "Fast, addictive block puzzle game playable in-browser on mobile and desktop. UK Drill soundtrack included for immersive gameplay.",
        "image": "https://lly-boob.github.io/
	  /og-image.png",
        "applicationCategory": "GameApplication",
        "operatingSystem": "WEB",
        "genre": "Puzzle, Arcade",
        "audience": {
          "@type": "Audience",
          "audienceType": "Everyone"
        }
      }
    ]
  }
  </script>

  <!-- CSS -->
  <link rel="stylesheet" href="./style.css?v=4">
	  </head>
<body>
  <!-- üî• Hidden SEO Boost Section (Invisible to players) -->
  <div style="position:absolute; left:-9999px; top:-9999px; height:0; width:0; overflow:hidden; opacity:0;">
    <h1>Block Blaster ‚Äî Free Online Block Puzzle Game with Candy Crush Style Swiping</h1>
    <h2>Play Fast, Addictive Block Breaking Game on Mobile & Desktop</h2>
    <h3>Instant Play ‚Ä¢ No Download ‚Ä¢ Arcade Puzzle ‚Ä¢ Swipe & Crush Blocks</h3>
    <p>
      Block Blaster is a free online block puzzle game where you swipe, drop, crush,
      and blast blocks just like the best Candy Crush‚Äìstyle arcade games. 
      Play instantly on mobile or desktop with smooth controls, colorful blocks,
      fast gameplay, and built‚Äëin UK Drill music for a hype experience.
    </p>
    <p>
      The game loads fast, runs directly in the browser, and includes 
      addictive puzzle action, high scores, block combos, multipliers,
      and arcade‚Äëstyle sound effects. Perfect for puzzle lovers, arcade fans,
      and players who enjoy fast, satisfying mechanics.
    </p>
    <p>
      Keywords: block puzzle game, swipe block game, free puzzle online,
      candy crush style puzzle, match blocks, block crush game, fast puzzle game,
      mobile puzzle game, no download puzzle, arcade block breaker,
      UK drill game music, browser games, instant play games.
    </p>
																			 </div>
  
<!-- ================================================== -->
<!--   BLOCK BLASTER ‚Äì FINAL PROFESSIONAL PRELOADER    -->
<!-- ================================================== -->
<div id="blockBlasterLoader" style="
    position:fixed; top:0; left:0; width:100vw; height:100vh;
    background: radial-gradient(circle at center, #1a1a2e 0%, #0f0f1a 100%);
    z-index:99999; display:flex; flex-direction:column;
    justify-content:center; align-items:center; overflow:hidden;
    font-family: 'Arial Black', Arial, sans-serif;
">
  <!-- Animated falling blocks canvas -->
  <canvas id="loaderCanvas" width="380" height="380" style="border-radius:20px; box-shadow:0 0 50px rgba(0,255,157,0.6);"></canvas>

  <!-- Game title with glowing effect -->
  <h1 style="
    color:#00ff9d; font-size:48px; margin:30px 0 8px; letter-spacing:8px;
    text-shadow: 0 0 20px #00ff9d, 0 0 40px #00ff9d, 0 0 60px #00ff9d;
    animation: glowPulse 2s infinite alternate;
  ">BLOCK BLASTER</h1>

  <!-- Subtitle -->
  <p style="color:#00ff9d; font-size:18px; margin:0; opacity:0.9; letter-spacing:3px;">
    Addictive Block Action
  </p>

  <!-- Loading text with dots animation -->
  <div style="color:#aaa; margin-top:30px; font-size:16px;">
    Loading<span class="dots">...</span>
  </div>
</div>

<style>
@keyframes glowPulse {
  from { text-shadow: 0 0 20px #00ff9d, 0 0 40px #00ff9d; }
  to { text-shadow: 0 0 30px #00ff9d, 0 0 60px #00ff9d, 0 0 80px #00ff9d; }
}
.dots {
  display: inline-block;
  animation: dots 1.5s infinite;
}
@keyframes dots {
  0%, 20% { content: '.'; }
  40% { content: '..'; }
  60% { content: '...'; }
  80%, 100% { content: ''; }
}
</style>

<script>
// Ultra-smooth falling + rotating neon blocks
const loader = document.getElementById('blockBlasterLoader');
const canvas = document.getElementById('loaderCanvas');
const ctx = canvas.getContext('2d');
let blocks = [];

class Block {
  constructor() {
    this.size = Math.random() * 25 + 18;
    this.x = Math.random() * canvas.width;
    this.y = -this.size;
    this.speed = Math.random() * 3.5 + 2.5;
    this.color = ['#ff0080','#00ff9d','#ffea00','#00d0ff','#ff2a6d'][Math.floor(Math.random()*5)];
    this.rotation = 0;
    this.rotSpeed = (Math.random() - 0.5) * 0.25;
  }
  update() {
    this.y += this.speed;
    this.rotation += this.rotSpeed;
    if (this.y > canvas.height + this.size) {
      this.y = -this.size;
      this.x = Math.random() * canvas.width;
    }
  }
  draw() {
    ctx.save();
    ctx.translate(this.x + this.size/2, this.y + this.size/2);
    ctx.rotate(this.rotation);
    ctx.fillStyle = this.color;
    ctx.shadowBlur = 20;
    ctx.shadowColor = this.color;
    ctx.fillRect(-this.size/2, -this.size/2, this.size, this.size);
    ctx.restore();
  }
}

// Create more blocks for richer effect
for(let i = 0; i < 22; i++) blocks.push(new Block());

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  blocks.forEach(b => { b.update(); b.draw(); });
  if (loader.offsetParent !== null) requestAnimationFrame(animate);
}
animate();

// Responsive canvas
function resizeCanvas() {
  const size = Math.min(380, window.innerWidth * 0.85);
  canvas.width = size;
  canvas.height = size;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

// === HIDE LOADER WHEN GAME IS READY ===
function hideBlockBlasterLoader() {
  loader.style.transition = 'opacity 0.8s ease-out';
  loader.style.opacity = '0';
  setTimeout(() => { loader.style.display = 'none'; }, 900);
}

// Never stuck longer than 4 seconds
setTimeout(hideBlockBlasterLoader, 95000);

// Call this from your script.js when everything is loaded
window.startBlockBlasterGame = hideBlockBlasterLoader;
		</script>


<!-- Game canvas -->
<canvas id="c"></canvas>

<!-- Gameplay HUD -->
<div class="hud">
	<div class="hud__score">
		<div class="score-lbl"></div>
		<div class="cube-count-lbl"></div>
	</div>
	<div class="pause-btn"><div></div></div>
	<div class="slowmo">
		<div class="slowmo__bar"></div>
	</div>
</div>

<!-- Menu System -->
<div class="menus">
	<div class="menu menu--main">
		<h1>Block Blaster</h1>
		<button type="button" class="play-normal-btn">PLAY GAME</button>
		<button type="button" class="play-casual-btn">CASUAL MODE</button>
		<div class="credits">3D game by <a href="https://lly-boob.github.io/Ultimate-pong/">LLydra Abong</a></div>
	</div>
	<div class="menu menu--pause">
		<h1>Paused</h1>
		<button type="button" class="resume-btn">RESUME GAME</button>
		<button type="button" class="menu-btn--pause">MAIN MENU</button>
	</div>
	<div class="menu menu--score">
		<h1>Game Over</h1>
		<h2>Your Score:</h2>
		<div class="final-score-lbl"></div>
		<div class="high-score-lbl"></div>
		<button type="button" class="play-again-btn">PLAY AGAIN</button>
		<button type="button" class="menu-btn--score">MAIN MENU</button>
	</div>
</div>

<!-- MUTE BUTTON -->
<div id="muteBtn" style="position:fixed;bottom:20px;right:20px;width:50px;height:50px;cursor:pointer;z-index:9999;">
  <svg viewBox="0 0 24 24" width="50" height="50" fill="#fff">
    <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
  </svg>
</div>



<!-- MUSIC + MUTE + SAFE PROP ADS INIT + SERVICE WORKER -->
<script>
  const music = document.getElementById('bgMusic');
  const muteBtn = document.getElementById('muteBtn');
  let muted = false;
  let started = false;
  let adLoaded = false;

  // PLAY MUSIC & LOAD PROP ADS ON FIRST TAP
  function startGame() {
    if (started) return;
    started = true;

    // Start music ‚Äî WITH ERROR LOGGING
    music.volume = 0.3;
    music.play()
      .then(() => {
        console.log('Music started');
      })
      .catch((err) => {
        console.warn('Music blocked until interaction:', err.message);
        // Optional: Show hint
        showUnmuteHint();
      });

    

    // Remove listeners
    document.removeEventListener('touchstart', startGame);
    document.removeEventListener('click', startGame);
  }

  // Add listeners
  document.addEventListener('touchstart', startGame, { once: true });
  document.addEventListener('click', startGame, { once: true });

  // MUTE BUTTON
  muteBtn.onclick = () => {
    muted = !muted;
    music.muted = muted;
    muteBtn.innerHTML = muted
      ? `<svg viewBox="0 0 24 24" width="50" height="50" fill="#aaa">
           <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/>
         </svg>`
      : `<svg viewBox="0 0 24 24" width="50" height="50" fill="#fff">
           <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
         </svg>`;
  };
</script>

<!-- ===== Simple Fixed Share Button (Matches Mute Style) ===== -->
<style>
#shareBtn {
  position: fixed;
  bottom: 14px;       /* Same as your mute */
  left: 20px;         /* So it sits beside mute, you can adjust */
  width: 42px;
  height: 42px;
  cursor: pointer;
  z-index: 9999999;
  background: rgba(255,255,255,0.25);
  backdrop-filter: blur(6px);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(255,255,255,0.4);
}

#shareBtn svg {
  width: 55%;
  height: 55%;
  fill: #fff;
}
</style>

<div id="shareBtn">
  <!-- Universal Share Icon -->
  <svg viewBox="0 0 24 24">
    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.02-4.11A2.99 
    2.99 0 0018 7.91a3 3 0 10-3-3c0 .24.04.47.09.7L8.07 9.72A3.007 3.007 
    0 006 9a3 3 0 103 3c0-.24-.04-.47-.09-.7l7.12 4.17c.5-.44 
    1.15-.71 1.87-.71a3 3 0 100-6z"/>
  </svg>
</div>

<script>
(function(){
  const shareBtn = document.getElementById("shareBtn");

  const texts = [
    "Try this game! üéÆ",
    "Challenge me! üî•",
    "Bet you can‚Äôt beat my score üòé",
  ];

  function randomMsg() {
    return texts[Math.floor(Math.random() * texts.length)];
  }

  shareBtn.addEventListener("click", async () => {
    let msg = randomMsg();

    try {
      if (navigator.share) {
        await navigator.share({
          title: "Play this game!",
          text: msg,
          url: window.location.href
        });
      } else {
        await navigator.clipboard.writeText(window.location.href);
        alert("Link copied!");
      }
    } catch(err) {
      console.log(err);
    }
  });
})();
	</script>

<script>
// =========================
// Touch Input Booster (Safe)
// =========================

// This prevents the browser from interfering with your swipe
// but does NOT break scroll on other pages or other elements.
// Only the canvas is protected.

document.addEventListener("DOMContentLoaded", () => {
    const canvas = document.querySelector("canvas");
    if (!canvas) return;

    const opts = { passive: false };

    ["touchstart", "touchmove", "touchend"].forEach(ev => {
        canvas.addEventListener(ev, e => {
            // Only stop browser behavior IF the user touched the canvas
            e.preventDefault();
        }, opts);
    });

    canvas.style.touchAction = "none"; // ultra-safe, only affects canvas
});
	</script>

<style>

<script>
// =========================
// Touch Input Ultra Booster
// =========================

// Makes touchmove fire at maximum device speed
// without changing how your game handles swipes.
document.addEventListener("DOMContentLoaded", () => {
    const canvas = document.querySelector("canvas");
    if (!canvas) return;

    const opts = { passive: true }; 
    // passive:true means "do NOT block game logic"

    let lastX = 0;
    let lastY = 0;

    canvas.addEventListener("touchmove", e => {
        const t = e.touches[0];
        lastX = t.clientX;
        lastY = t.clientY;

        // You can read lastX / lastY anywhere,
        // the game will feel smoother because input refreshes faster.
    }, opts);

    // Make the browser render touch faster
    canvas.style.touchAction = "manipulation";
});
</script>

	
/* ===== Install Popup Animation ===== */
#autoInstallBox {
    opacity: 0;
    transform: translate(-50%, 20px);
    transition: all 0.6s ease;
}

#autoInstallBox.show {
    opacity: 1;
    transform: translate(-50%, 0);
    animation: bounceIn 0.6s ease-out;
}

@keyframes bounceIn {
    0% { transform: translate(-50%, 40px); }
    60% { transform: translate(-50%, -5px); }
    100% { transform: translate(-50%, 0); }
}
</style>

<!-- ===== AUTO INSTALL POPUP ===== -->
<div id="autoInstallBox" style="
    display:none;
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #111;
    color: #fff;
    padding: 15px 20px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.4);
    z-index: 999999;
    text-align: center;
    font-size: 16px;
">
    <div style="margin-bottom: 10px;">
        Install this game for faster play & offline access!
    </div>

    <button id="autoInstallBtn" style="
        background: #1e90ff;
        border: none;
        color: white;
        padding: 10px 18px;
        border-radius: 8px;
        font-size: 15px;
        cursor: pointer;
    ">
        Install Now
    </button>
</div>

<script>
/* ===== Install Prompt Logic ===== */
let deferredPrompt = null;
let popupShown = false;

window.addEventListener("beforeinstallprompt", (e) => {
    e.preventDefault();
    deferredPrompt = e;

    if (!popupShown) {
        setTimeout(showPopup, 2000); // show after 2 seconds
    }
});

function showPopup() {
    if (deferredPrompt) {
        const box = document.getElementById("autoInstallBox");
        box.style.display = "block";

        // Start animation
        setTimeout(() => {
            box.classList.add("show");
        }, 20);

        popupShown = true;

        // Re-show every 10 seconds until installed
        setTimeout(() => {
            if (deferredPrompt) showPopup();
        }, 10000);
    }
}

document.getElementById("autoInstallBtn").addEventListener("click", () => {
    if (!deferredPrompt) return;

    deferredPrompt.prompt();
    deferredPrompt = null;
    hidePopup();
});

// Hide forever once installed
window.addEventListener("appinstalled", () => {
    deferredPrompt = null;
    hidePopup();
});

function hidePopup() {
    const box = document.getElementById("autoInstallBox");
    box.classList.remove("show");

    setTimeout(() => {
        box.style.display = "none";
    }, 600);
}
</script>


<!-- ========================= -->
<!-- Open in Browser Prompt -->
<!-- ========================= -->
<div id="openBrowserBox">
  <button id="openBrowserBtn">üåê Open in Browser to install</button>
</div>

<style>
  #openBrowserBox {
    position: fixed;
    bottom: 20px;
    left: 20px;
    z-index: 9999;
    display: none;
    pointer-events: auto;
  }

  #openBrowserBtn {
    background: #ff9800;
    color: #fff;
    border: none;
    border-radius: 12px;
    padding: 10px 16px;
    font-size: 14px;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.25);
    transition: transform 0.2s ease, opacity 0.3s ease;
    opacity: 0;
  }

  #openBrowserBox.show #openBrowserBtn {
    opacity: 1;
    transform: scale(1.1);
    animation: bounce 1s infinite alternate;
  }

  @keyframes bounce {
    0% { transform: scale(1.1); }
    100% { transform: scale(1.2); }
  }
</style>

<script>
(function() {
  // Prevent showing multiple times per session
  if (sessionStorage.getItem("openBrowserClicked")) return;

  const ua = navigator.userAgent || navigator.vendor || window.opera;

  // Smart detection: common social media in-app browsers
  const socialAppPatterns = [
    /FBAN|FBAV/i,          // Facebook app
    /Instagram/i,           // Instagram
    /Twitter/i,             // Twitter
    /Snapchat/i,            // Snapchat
    /LinkedIn/i,            // LinkedIn
    /Reddit/i,              // Reddit
    /TikTok/i,              // TikTok
    /WhatsApp/i,            // WhatsApp
    /Messenger/i,           // Messenger
    /Pinterest/i            // Pinterest
  ];

  // Also detect known in-app browser patterns (iOS & Android)
  const inAppBrowserPatterns = [
    /CriOS/i,               // Chrome on iOS
    /FxiOS/i,               // Firefox on iOS
    /GSA/i                  // Google Search app
  ];

  // Check if user is in social media or in-app browser
  const isSocialApp = socialAppPatterns.some(rx => rx.test(ua));
  const isInAppBrowser = /FBAN|FBAV|Instagram|Twitter|Snapchat|LinkedIn|Reddit|TikTok|Messenger|WhatsApp|Pinterest/i.test(ua)
                        && !/Chrome|Safari|Firefox|Edge/i.test(ua);

  if (!isSocialApp && !isInAppBrowser) return; // Exit if not social media browser

  const box = document.getElementById("openBrowserBox");
  const btn = document.getElementById("openBrowserBtn");

  // Show button after a short delay
  setTimeout(() => {
    box.style.display = "block";
    requestAnimationFrame(() => box.classList.add("show"));
  }, 2000);

  // Open page in default browser
  btn.addEventListener("click", () => {
    window.open(window.location.href, "_blank");

    // Hide and mark as clicked
    box.classList.remove("show");
    setTimeout(() => box.style.display = "none", 300);
    sessionStorage.setItem("openBrowserClicked", "true");
  });
})();
	</script>

<body>
  <!-- All your existing HTML (canvas, hud, menus, mute button, etc.) stays 100% the same -->
  <canvas id="c"></canvas>
  <div class="hud">‚Ä¶</div>
  <div class="menus">‚Ä¶</div>
  <div id="muteBtn">‚Ä¶</div>
  <div id="shareBtn">‚Ä¶</div>
  <!-- etc. keep everything you already have -->



        
<!-- ===================================================== -->
<!--        ZERO-LAG ULTRA PERFORMANCE OPTIMIZER          -->
<!-- ===================================================== -->
<script>
(function ZeroLagOptimizer() {
    'use strict';
    
    console.log('üöÄ ACTIVATING ZERO-LAG OPTIMIZER...');
    
    // 1. AGGRESSIVE HARDWARE ACCELERATION
    // ====================================
    const forceHardwareAcceleration = () => {
        document.body.style.transform = 'translate3d(0,0,0)';
        document.body.style.willChange = 'transform';
        document.body.style.backfaceVisibility = 'hidden';
        document.body.style.perspective = '1000px';
        document.documentElement.style.scrollBehavior = 'auto';
        document.body.style.background = '#000';
        
        // Force composite layer for entire game area
        const gameContainer = document.querySelector('.menus') || document.body;
        gameContainer.style.transform = 'translateZ(0)';
        gameContainer.style.willChange = 'transform';
    };

    // 2. ULTRA-AGGRESSIVE DEVICE DETECTION
    // ====================================
    const detectDeviceTier = () => {
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const cores = navigator.hardwareConcurrency || 2;
        const memory = navigator.deviceMemory || 4;
        const isSlowDevice = cores <= 2 || memory <= 2;
        
        // WebGL capability test
        let webglTier = 3;
        try {
            const canvas = document.createElement('canvas');
            const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
            if (!gl) webglTier = 0;
            else {
                const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                const renderer = debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : '';
                if (/mali|adreno|powervr|intel.*hd|radeon.*hd/i.test(renderer.toLowerCase())) {
                    webglTier = isMobile ? 1 : 2;
                }
            }
        } catch (e) {
            webglTier = 0;
        }

        if (webglTier === 0 || isSlowDevice) return 'VERY_LOW';
        if (isMobile && webglTier <= 1) return 'LOW';
        if (isMobile) return 'MEDIUM';
        return 'HIGH';
    };

    const deviceTier = detectDeviceTier();
    console.log(`üì± Device Tier: ${deviceTier}`);

    // 3. EXTREME QUALITY SETTINGS
    // ===========================
    const getAggressiveSettings = () => {
        switch (deviceTier) {
            case 'VERY_LOW': // Old phones, slow devices
                return {
                    scale: 0.4,
                    fps: 30,
                    shadows: false,
                    particles: 20,
                    antialias: false,
                    resolution: 0.5,
                    physicsQuality: 0.5,
                    targetCount: 3
                };
            case 'LOW': // Budget smartphones
                return {
                    scale: 0.6,
                    fps: 45,
                    shadows: false,
                    particles: 40,
                    antialias: false,
                    resolution: 0.7,
                    physicsQuality: 0.7,
                    targetCount: 5
                };
            case 'MEDIUM': // Modern smartphones
                return {
                    scale: 0.8,
                    fps: 60,
                    shadows: true,
                    particles: 80,
                    antialias: false,
                    resolution: 0.85,
                    physicsQuality: 0.9,
                    targetCount: 8
                };
            case 'HIGH': // PCs, Tablets, High-end phones
            default:
                return {
                    scale: 1.0,
                    fps: 60,
                    shadows: true,
                    particles: 150,
                    antialias: true,
                    resolution: 1.0,
                    physicsQuality: 1.0,
                    targetCount: 12
                };
        }
    };

    const settings = getAggressiveSettings();
    window.GAME_SETTINGS = settings;

    // 4. CANVAS OPTIMIZATION - EXTREME MODE
    // =====================================
    const optimizeCanvasExtreme = () => {
        const canvas = document.getElementById('c');
        if (!canvas) return;

        const dpr = Math.min(window.devicePixelRatio || 1, deviceTier === 'VERY_LOW' ? 1 : 2);
        const rect = canvas.getBoundingClientRect();
        
        // Ultra-aggressive resolution scaling
        canvas.width = Math.floor(rect.width * dpr * settings.scale * settings.resolution);
        canvas.height = Math.floor(rect.height * dpr * settings.scale * settings.resolution);
        
        canvas.style.width = '100%';
        canvas.style.height = '100%';
        canvas.style.imageRendering = deviceTier === 'VERY_LOW' ? 'pixelated' : 'crisp-edges';
        canvas.style.transform = 'translate3d(0,0,0)';
        canvas.style.willChange = 'transform';

        // WebGL context with extreme optimizations
        const contextAttributes = {
            alpha: false,
            depth: false,
            stencil: false,
            antialias: settings.antialias,
            premultipliedAlpha: false,
            preserveDrawingBuffer: false,
            powerPreference: deviceTier === 'VERY_LOW' ? 'low-power' : 'high-performance',
            failIfMajorPerformanceCaveat: true,
            desynchronized: true // Chrome only - reduces latency
        };

        let gl = canvas.getContext('webgl', contextAttributes) || 
                 canvas.getContext('experimental-webgl', contextAttributes);

        if (gl) {
            // Disable EVERYTHING non-essential
            gl.disable(gl.DEPTH_TEST);
            gl.disable(gl.STENCIL_TEST);
            gl.disable(gl.DITHER);
            gl.disable(gl.BLEND);
            gl.disable(gl.CULL_FACE);
            gl.disable(gl.POLYGON_OFFSET_FILL);
            gl.disable(gl.SAMPLE_ALPHA_TO_COVERAGE);
            gl.disable(gl.SAMPLE_COVERAGE);
            
            // Clear to black once
            gl.clearColor(0, 0, 0, 1);
            gl.clear(gl.COLOR_BUFFER_BIT);
        }

        console.log(`üéØ EXTREME Canvas: ${canvas.width}x${canvas.height}, Scale: ${settings.scale}`);
        return canvas;
    };

    // 5. ULTRA-SMOOTH FPS CONTROL
    // ===========================
    const createFrameController = () => {
        let lastTime = 0;
        let frameCount = 0;
        let lastFpsUpdate = 0;
        const frameTime = 1000 / settings.fps;
        let fps = settings.fps;

        const updateFPS = () => {
            const now = performance.now();
            frameCount++;
            
            if (now - lastFpsUpdate >= 1000) {
                fps = frameCount;
                frameCount = 0;
                lastFpsUpdate = now;
                
                // Auto-adjust quality if FPS drops
                if (fps < settings.fps * 0.6 && settings.scale > 0.3) {
                    settings.scale = Math.max(0.3, settings.scale - 0.1);
                    console.warn(`‚ö†Ô∏è FPS DROP! Reducing quality to: ${settings.scale}`);
                    optimizeCanvasExtreme();
                }
            }
        };

        const requestAnimationFrameOptimized = (callback) => {
            return window.requestAnimationFrame((timestamp) => {
                if (!lastTime) lastTime = timestamp;
                const delta = timestamp - lastTime;
                
                if (delta >= frameTime) {
                    lastTime = timestamp - (delta % frameTime);
                    callback(timestamp);
                    updateFPS();
                } else {
                    requestAnimationFrameOptimized(callback);
                }
            });
        };

        // Replace native RAF
        window.requestAnimationFrame = requestAnimationFrameOptimized;
        
        return { getFPS: () => fps };
    };

    // 6. ULTRA-SMOOTH TOUCH INPUT
    // ===========================
    const optimizeTouchExtreme = () => {
        const canvas = document.getElementById('c');
        if (!canvas) return;

        // Remove ALL touch delays and restrictions
        canvas.style.touchAction = 'none';
        canvas.style.webkitTapHighlightColor = 'transparent';
        canvas.style.webkitTouchCallout = 'none';
        canvas.style.webkitUserSelect = 'none';
        canvas.style.userSelect = 'none';

        const touchHandler = (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            // Force immediate propagation for game
            if (e.type === 'touchmove') {
                const touch = e.touches[0];
                if (window.handleGameTouch) {
                    window.handleGameTouch(touch.clientX, touch.clientY);
                }
            }
        };

        // Use capturing phase for fastest response
        const events = ['touchstart', 'touchmove', 'touchend', 'touchcancel'];
        events.forEach(event => {
            document.addEventListener(event, touchHandler, { 
                passive: false, 
                capture: true 
            });
        });

        console.log('üëÜ ULTRA-SMOOTH Touch activated');
    };

    // 7. MEMORY MANAGEMENT - AGGRESSIVE
    // =================================
    const setupMemoryManager = () => {
        let memoryWatchdog = null;
        let leakDetector = new Set();
        
        const forceGarbageCollection = () => {
            if (window.gc) {
                window.gc();
            } else {
                // Aggressive memory cleanup
                try {
                    if (window.performance && window.performance.memory) {
                        const used = window.performance.memory.usedJSHeapSize;
                        const limit = window.performance.memory.jsHeapSizeLimit;
                        
                        if (used / limit > 0.8) {
                            console.warn('üîÑ High memory usage - forcing cleanup');
                            const largeArray = new Array(10000);
                            setTimeout(() => { largeArray.length = 0; }, 0);
                        }
                    }
                } catch (e) {}
            }
        };

        // Cleanup every 10 seconds
        memoryWatchdog = setInterval(forceGarbageCollection, 10000);
        
        // Monitor object leaks
        window.trackObject = (obj) => {
            leakDetector.add(obj);
            return obj;
        };
        
        window.cleanupTracked = () => {
            leakDetector.clear();
        };
        
        return () => clearInterval(memoryWatchdog);
    };

    // 8. NETWORK & LOADING OPTIMIZATIONS
    // ==================================
    const optimizeNetwork = () => {
        // Preload critical game components
        const preloadResources = [
            './script.js',
            './style.css'
        ];

        preloadResources.forEach(url => {
            const link = document.createElement('link');
            link.rel = 'preload';
            link.href = url;
            link.as = url.endsWith('.js') ? 'script' : 'style';
            link.crossOrigin = 'anonymous';
            document.head.appendChild(link);
        });

        // Service worker for caching
        if ('serviceWorker' in navigator && !navigator.serviceWorker.controller) {
            navigator.serviceWorker.register('./sw.js')
                .then(() => console.log('üîß Service Worker registered'))
                .catch(console.error);
        }
    };

    // 9. BLOCK BURSTING & PHYSICS OPTIMIZATIONS
    // =========================================
    const setupGameOptimizations = () => {
        // Expose settings to game
        window.GAME_OPTIMIZATIONS = {
            // Reduce particle counts for low-end devices
            maxParticles: settings.particles,
            // Simplify physics
            physicsSteps: Math.max(1, Math.floor(3 * settings.physicsQuality)),
            // Limit concurrent objects
            maxTargets: settings.targetCount,
            // Optimize collision detection
            collisionQuality: settings.physicsQuality,
            // Reduce visual effects
            enableScreenShake: deviceTier !== 'VERY_LOW',
            enableGlowEffects: deviceTier === 'HIGH'
        };

        console.log('üéÆ Game optimizations applied:', window.GAME_OPTIMIZATIONS);
    };

    // 10. ANTI-FLICKER & ANTI-GLITCH MEASURES
    // =======================================
    const eliminateFlickering = () => {
        // Force synchronous rendering for critical frames
        const originalGetContext = HTMLCanvasElement.prototype.getContext;
        HTMLCanvasElement.prototype.getContext = function(type, attrs) {
            const ctx = originalGetContext.call(this, type, attrs);
            if (ctx && type.includes('webgl')) {
                // Ensure consistent frame timing
                ctx.finish = ctx.finish || (() => {});
            }
            return ctx;
        };

        // Prevent background tab throttling
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden) {
                // Force redraw when returning to tab
                const canvas = document.getElementById('c');
                if (canvas) {
                    const ctx = canvas.getContext('2d');
                    if (ctx) ctx.clearRect(0, 0, canvas.width, canvas.height);
                }
            }
        });
    };

    // 11. INITIALIZE EVERYTHING
    // =========================
    const init = () => {
        console.log('üî• INITIALIZING ZERO-LAG OPTIMIZER...');
        
        forceHardwareAcceleration();
        optimizeCanvasExtreme();
        optimizeTouchExtreme();
        createFrameController();
        setupMemoryManager();
        optimizeNetwork();
        setupGameOptimizations();
        eliminateFlickering();
        
        // Handle resize efficiently
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(optimizeCanvasExtreme, 100);
        }, { passive: true });

        console.log('‚úÖ ZERO-LAG OPTIMIZER FULLY ACTIVATED!');
        console.log('üìä Final Settings:', settings);
        
        // Signal to game that optimizations are ready
        window.dispatchEvent(new Event('optimizationsReady'));
    };

    // Start immediately
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }
})();
	</script>

	


            
	
            


	<!-- GAME SCRIPT -->
<script type="module" src="./script.js"></script>

<script src="./menja/dist/ads.js"></script>  <!
	
</body>
</html>
