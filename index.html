<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#2c3f51">

  <!-- Primary SEO -->
  <title>Block Blaster â€” Free Online Block Puzzle Game | Play Instantly</title>
  <meta name="description" content="Play Block Blaster â€” the ultimate free online block puzzle game! Instantly playable on mobile & desktop. No download, addictive fun, UK Drill music, and simple controls.">
  <link rel="canonical" href="https://lly-boob.github.io/">

  <!-- Favicon & App Icons -->
  <link rel="icon" href="https://lly-boob.github.io/favicon.png?v=2" sizes="32x32">
  <link rel="icon" href="https://lly-boob.github.io/favicon.png?v=2" sizes="192x192">
  <link rel="apple-touch-icon" href="https://lly-boob.github.io/favicon.png?v=2">

  <!-- Manifest for PWA -->
  <link rel="manifest" href="manifest.json">

  <!-- Google Site Verification -->
  <meta name="google-site-verification" content="gZ3LD9X67kObs3lh5Ix7KD9vnSki8VLa6ZONdvCPIxE" />

  <!-- Monetization -->
<meta name="monetag" content="ef7c500bcbab5c68feaab4175d9cfc13">

	

  <!-- Open Graph for Social Sharing -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Block Blaster â€” Free Online Block Game">
  <meta property="og:description" content="Fast, addictive block puzzle game like Candy Crush. Play now on mobile or desktop â€” no download required, UK Drill music included.">
  <meta property="og:url" content="https://lly-boob.github.io/">
  <meta property="og:image" content="https://lly-boob.github.io/og-image.png">
  <meta property="og:image:alt" content="Block Blaster gameplay screenshot with colorful blocks">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Block Blaster â€” Free Online Block Game">
  <meta name="twitter:description" content="Play Block Blaster â€” addictive block puzzle game online. Instant play on mobile & desktop. UK Drill soundtrack included.">
  <meta name="twitter:image" content="https://lly-boob.github.io/
	  /og-image.png">

  <!-- JSON-LD structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebSite",
        "@id": "https://lly-boob.github.io/#website",
        "url": "https://lly-boob.github.io/",
        "name": "Block Blaster",
        "description": "Play Block Blaster â€” a fast, addictive block puzzle game played in the browser with UK Drill music.",
        "publisher": {
          "@type": "Organization",
          "name": "LLydra"
        }
      },
      {
        "@type": "Game",
        "name": "Block Blaster",
        "url": "https://lly-boob.github.io/",
        "description": "Fast, addictive block puzzle game playable in-browser on mobile and desktop. UK Drill soundtrack included for immersive gameplay.",
        "image": "https://lly-boob.github.io/
	  /og-image.png",
        "applicationCategory": "GameApplication",
        "operatingSystem": "WEB",
        "genre": "Puzzle, Arcade",
        "audience": {
          "@type": "Audience",
          "audienceType": "Everyone"
        }
      }
    ]
  }
  </script>

  <!-- CSS -->
  <link rel="stylesheet" href="./style.css?v=4">
	  </head>
<body>
  <!-- ðŸ”¥ Hidden SEO Boost Section (Invisible to players) -->
  <div style="position:absolute; left:-9999px; top:-9999px; height:0; width:0; overflow:hidden; opacity:0;">
    <h1>Block Blaster â€” Free Online Block Puzzle Game with Candy Crush Style Swiping</h1>
    <h2>Play Fast, Addictive Block Breaking Game on Mobile & Desktop</h2>
    <h3>Instant Play â€¢ No Download â€¢ Arcade Puzzle â€¢ Swipe & Crush Blocks</h3>
    <p>
      Block Blaster is a free online block puzzle game where you swipe, drop, crush,
      and blast blocks just like the best Candy Crushâ€“style arcade games. 
      Play instantly on mobile or desktop with smooth controls, colorful blocks,
      fast gameplay, and builtâ€‘in UK Drill music for a hype experience.
    </p>
    <p>
      The game loads fast, runs directly in the browser, and includes 
      addictive puzzle action, high scores, block combos, multipliers,
      and arcadeâ€‘style sound effects. Perfect for puzzle lovers, arcade fans,
      and players who enjoy fast, satisfying mechanics.
    </p>
    <p>
      Keywords: block puzzle game, swipe block game, free puzzle online,
      candy crush style puzzle, match blocks, block crush game, fast puzzle game,
      mobile puzzle game, no download puzzle, arcade block breaker,
      UK drill game music, browser games, instant play games.
    </p>
																			 </div>
  
  <!-- PRELOADER â€” BEAUTIFUL & BRANDED -->
<div id="preloader">
  <div class="preloader-content">
    <img src="./LLydra.jpg" alt="Block Blaster" class="preloader-logo">
    <div class="preloader-glow"></div>
    <div class="preloader-text">Loading...</div>
  </div>
</div>


<script>
  // PRELOADER â€” FIXED (uses your real image)
  const preloader = document.getElementById('preloader');
  const bgImg = new Image();
  bgImg.src = "https://www.transparenttextures.com/patterns/black-linen.png";
  const logoImg = new Image();
  logoImg.src ="./LLydra.jpg";  // YOUR ACTUAL IMAGE

  function hidePreloader() {
    preloader.classList.add('preloader-hidden');
    setTimeout(() => preloader.remove(), 900);
  }

  window.addEventListener('load', () => {
    document.fonts.ready.then(() => {
      Promise.all([
        new Promise(r => { bgImg.onload = r; if (bgImg.complete) r(); }),
        new Promise(r => { logoImg.onload = r; if (logoImg.complete) r(); })
      ]).then(hidePreloader)
       .catch(() => setTimeout(hidePreloader, 500));
    });
  });

  // NEVER STUCK
  setTimeout(hidePreloader, 3000);
</script>

<!-- Game canvas -->
<canvas id="c"></canvas>

<!-- Gameplay HUD -->
<div class="hud">
	<div class="hud__score">
		<div class="score-lbl"></div>
		<div class="cube-count-lbl"></div>
	</div>
	<div class="pause-btn"><div></div></div>
	<div class="slowmo">
		<div class="slowmo__bar"></div>
	</div>
</div>

<!-- Menu System -->
<div class="menus">
	<div class="menu menu--main">
		<h1>Block Blaster</h1>
		<button type="button" class="play-normal-btn">PLAY GAME</button>
		<button type="button" class="play-casual-btn">CASUAL MODE</button>
		<div class="credits">3D game by <a href="https://lly-boob.github.io/Ultimate-pong/">LLydra Abong</a></div>
	</div>
	<div class="menu menu--pause">
		<h1>Paused</h1>
		<button type="button" class="resume-btn">RESUME GAME</button>
		<button type="button" class="menu-btn--pause">MAIN MENU</button>
	</div>
	<div class="menu menu--score">
		<h1>Game Over</h1>
		<h2>Your Score:</h2>
		<div class="final-score-lbl"></div>
		<div class="high-score-lbl"></div>
		<button type="button" class="play-again-btn">PLAY AGAIN</button>
		<button type="button" class="menu-btn--score">MAIN MENU</button>
	</div>
</div>

<!-- MUTE BUTTON -->
<div id="muteBtn" style="position:fixed;bottom:20px;right:20px;width:50px;height:50px;cursor:pointer;z-index:9999;">
  <svg viewBox="0 0 24 24" width="50" height="50" fill="#fff">
    <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
  </svg>
</div>



<!-- MUSIC + MUTE + SAFE PROP ADS INIT + SERVICE WORKER -->
<script>
  const music = document.getElementById('bgMusic');
  const muteBtn = document.getElementById('muteBtn');
  let muted = false;
  let started = false;
  let adLoaded = false;

  // PLAY MUSIC & LOAD PROP ADS ON FIRST TAP
  function startGame() {
    if (started) return;
    started = true;

    // Start music â€” WITH ERROR LOGGING
    music.volume = 0.3;
    music.play()
      .then(() => {
        console.log('Music started');
      })
      .catch((err) => {
        console.warn('Music blocked until interaction:', err.message);
        // Optional: Show hint
        showUnmuteHint();
      });

    // ---- Load PropellerAds BANNER only once after first interaction ----
    if (!adLoaded) {
      adLoaded = true;
      const zoneId = 'YOUR_ZONE_ID';  // â† REPLACE THIS
      const script = document.createElement('script');
      script.async = true;
      script.src = `https://propellerads.com/api/v1/pub/zone/${zoneId}`;
      script.onload = () => {
        window.propellerAds?.renderBanner('propellerBanner');
      };
      document.head.appendChild(script);
    }

    // Remove listeners
    document.removeEventListener('touchstart', startGame);
    document.removeEventListener('click', startGame);
  }

  // Add listeners
  document.addEventListener('touchstart', startGame, { once: true });
  document.addEventListener('click', startGame, { once: true });

  // MUTE BUTTON
  muteBtn.onclick = () => {
    muted = !muted;
    music.muted = muted;
    muteBtn.innerHTML = muted
      ? `<svg viewBox="0 0 24 24" width="50" height="50" fill="#aaa">
           <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/>
         </svg>`
      : `<svg viewBox="0 0 24 24" width="50" height="50" fill="#fff">
           <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
         </svg>`;
  };
</script>

<!-- ===== Intelligent & Animated Mascot Assistant ===== -->
<style>
#friendAssistant {
  position: fixed;
  bottom: 100px;
  right: 18px;
  width: 72px;
  height: 72px;
  cursor: pointer;
  z-index: 99999999;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: floatIdle 4s ease-in-out infinite;
}

#friendSVG {
  width: 100%;
  height: 100%;
  transition: transform 0.25s;
}

/* Floating animation */
@keyframes floatIdle {
  0%,100% { transform: translate(0px, 0px); }
  25% { transform: translate(3px, -5px); }
  50% { transform: translate(-2px, 5px); }
  75% { transform: translate(2px, -4px); }
}

/* Eyes */
.eye { transition: transform 0.1s; }
.blink { animation: blinkAnim 0.15s; }

@keyframes blinkAnim { 0%{transform:scaleY(1);}50%{transform:scaleY(0.1);}100%{transform:scaleY(1);} }

/* speech bubble */
#faSpeech {
  position: absolute;
  background: rgba(255,255,255,0.95);
  color: #222;
  padding: 10px 14px;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.3);
  font-size: 14px;
  display: none;
  line-height: 1.3;
  max-width: 240px;
  z-index: 99999998;
  pointer-events: none;
}

/* panel */
#faPanel { opacity:0; transition:opacity 0.35s, transform 0.35s; position:fixed; bottom:180px; left:50%; transform:translate(-50%,0); background:rgba(255,255,255,0.95); padding:16px 18px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.3); }
#faPanel.show { opacity:1; transform:translate(-50%,-6px);}
.faTitle { font-weight:700; margin-bottom:8px; color:#2b2b2b;}
.faText { color:#333; margin-bottom:12px; line-height:1.3;}
.faRow{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;}
.faBtn{background:linear-gradient(135deg,#ffb86b,#ff7aa2);border:none;padding:9px 14px;color:#fff;border-radius:10px;font-weight:600;cursor:pointer;box-shadow:0 6px 14px rgba(0,0,0,0.14); position:relative; }
.faSmall{background:#fff;color:#333;border:1px solid #eee;padding:8px 10px;border-radius:9px;cursor:pointer;}
#faNameModal{display:none;position: fixed; inset:0; background: rgba(0,0,0,0.45); z-index:100000000; align-items:center; justify-content:center;}
#faNameCard{background:#fff; border-radius:12px; padding:18px; width:320px; box-shadow:0 12px 36px rgba(0,0,0,0.28); text-align:center;}
#faNameCard input{width:100%; padding:10px; border-radius:9px; border:1px solid #e6e6e6; margin-top:10px; font-size:15px;}
#faNameCard .faSave{margin-top:12px;background:#6ec1ff;color:#fff;border:none;padding:10px 14px;border-radius:9px;cursor:pointer;}

/* Share button flying animation */
#faShareBtn {
  position: absolute;
  bottom: 0;
  right: 0;
  transform: translate(0,0) scale(0);
  opacity: 0;
  transition: transform 0.5s ease, opacity 0.5s ease;
  pointer-events: none;
}
#faShareBtn.fly {
  opacity: 1;
  transform: translate(-50px, -100px) scale(1);
  pointer-events: auto;
}
#faShareBtn.fly-back {
  opacity: 0;
  transform: translate(0,0) scale(0);
}
</style>

<!-- Mascot -->
<div id="friendAssistant" title="Tap me â€” I'm your game buddy!">
  <svg id="friendSVG" viewBox="0 0 100 100">
    <circle cx="50" cy="50" r="48" fill="#6ec1ff" stroke="#5bb1e6" stroke-width="4"/>
    <circle class="eye" cx="35" cy="40" r="6" fill="#fff"/>
    <circle class="eye" cx="65" cy="40" r="6" fill="#fff"/>
    <circle class="pupil" cx="35" cy="40" r="3" fill="#222"/>
    <circle class="pupil" cx="65" cy="40" r="3" fill="#222"/>
    <path d="M35,60 Q50,75 65,60" stroke="#222" stroke-width="3" fill="transparent" stroke-linecap="round"/>
  </svg>
</div>

<div id="faSpeech" aria-live="polite"></div>

<div id="faPanel" role="dialog" aria-hidden="true">
  <div class="faTitle" id="faPanelTitle">Hey there! I'm Poppy ðŸ’–</div>
  <div class="faText" id="faPanelText">Iâ€™m here to cheer you and give tips.</div>
  <div class="faRow">
    <button class="faBtn" id="faShareBtn">Share & Brag!</button>
    <button class="faSmall" id="faTipBtn">Give me a tip</button>
    <button class="faSmall" id="faCloseBtn">Close</button>
  </div>
</div>

<div id="faNameModal" aria-hidden="true">
  <div id="faNameCard">
    <div style="font-size:18px; font-weight:700;">Hi! What should I call you? ðŸ¥°</div>
    <div style="margin-top:8px; color:#555;">Iâ€™ll remember your name and cheer you on!</div>
    <input id="faNameInput" placeholder="Your name (or nickname)" maxlength="18" />
    <div style="display:flex; gap:8px; justify-content:center;">
      <button class="faSave" id="faSaveName">Save</button>
      <button class="faSmall" id="faSkipName">Skip</button>
    </div>
  </div>
</div>

<script>
(function(){
  const KEY_NAME='fa_playerName_v3', KEY_SHARED='fa_shared_v3';
  const assistant=document.getElementById('friendAssistant');
  const svg=document.getElementById('friendSVG');
  const pupils=[...svg.querySelectorAll('.pupil')];
  const speech=document.getElementById('faSpeech');
  const panel=document.getElementById('faPanel');
  const panelTitle=document.getElementById('faPanelTitle');
  const panelText=document.getElementById('faPanelText');
  const shareBtn=document.getElementById('faShareBtn');
  const tipBtn=document.getElementById('faTipBtn');
  const closeBtn=document.getElementById('faCloseBtn');
  const nameModal=document.getElementById('faNameModal');
  const nameInput=document.getElementById('faNameInput');
  const saveNameBtn=document.getElementById('faSaveName');
  const skipNameBtn=document.getElementById('faSkipName');

  let playerName=localStorage.getItem(KEY_NAME)||'';
  let hasShared=localStorage.getItem(KEY_SHARED)==='yes';

  const tips=[
    'Match 4 to create a special tile!',
    'Chain combos for bonus points!',
    'Special tiles clear rows fast!',
    'Focus on quick moves for high score!',
    'Observe patterns to get streak bonuses!'
  ];
  const greetings=[name=>`Hey ${name}! Ready for fun? ðŸŽ‰`,name=>`Hi ${name}, Poppy here! ðŸ¬ Let's crush it!`,name=>`Welcome back, ${name}! ðŸ†`];

  function rand(arr){return arr[Math.floor(Math.random()*arr.length)];}

  function speak(text,ms=5000){
    speech.innerHTML=text;
    const rect=assistant.getBoundingClientRect();
    speech.style.left=`${rect.left+rect.width/2}px`;
    speech.style.top=`${rect.top-10}px`;
    speech.style.display='block';
    hop();
    clearTimeout(speak._t);
    speak._t=setTimeout(()=>speech.style.display='none',ms);
  }

  function hop(){ svg.style.transform='translateY(-8px) rotate(5deg)'; setTimeout(()=>svg.style.transform='',300); }

  function showPanel(title,text){ panelTitle.innerHTML=title; panelText.innerHTML=text; panel.classList.add('show'); panel.style.display='block'; panel.setAttribute('aria-hidden','false'); }
  function hidePanel(){ panel.classList.remove('show'); setTimeout(()=>{panel.style.display='none'; panel.setAttribute('aria-hidden','true');},360); }

  function openNameModal(){ nameModal.style.display='flex'; nameModal.setAttribute('aria-hidden','false'); nameInput.focus(); }
  function closeNameModal(){ nameModal.style.display='none'; nameModal.setAttribute('aria-hidden','true'); }
  function saveName(n){ playerName=n.trim().slice(0,18); if(playerName) localStorage.setItem(KEY_NAME,playerName); }

  window.addEventListener('load',()=>{
    if(!playerName){ setTimeout(()=>{ openNameModal(); speak("Hi! I'm Poppy â€” what's your name? â¤ï¸",7000); },1300); }
    else speak(rand(greetings)(playerName),5000);
    setInterval(randomBlink,4000);
  });

  function randomBlink(){ pupils.forEach(p=>p.classList.add('blink')); setTimeout(()=>pupils.forEach(p=>p.classList.remove('blink')),150); }

  document.addEventListener('mousemove',e=>{
    const rect=svg.getBoundingClientRect();
    const cx=rect.left+rect.width/2, cy=rect.top+rect.height/2;
    const dx=(e.clientX-cx)/15;
    const dy=(e.clientY-cy)/15;
    pupils.forEach((p,i)=>{p.setAttribute('cx',35+i*30 + dx); p.setAttribute('cy',40 + dy);});
  });

  saveNameBtn.addEventListener('click',()=>{ const val=(nameInput.value||'').trim(); if(!val || val.length<2){ nameInput.focus(); return; } saveName(val); closeNameModal(); speak(`Yay ${playerName}! Let's play!`,5200); });
  skipNameBtn.addEventListener('click',()=>{ closeNameModal(); speak('No worries â€” I will still cheer you on! ðŸ˜Š',4200); });
  nameInput.addEventListener('keydown',(ev)=>{ if(ev.key==='Enter') saveNameBtn.click(); });

  function flyOutShare(duration=15000){
    shareBtn.classList.remove('fly-back');
    shareBtn.classList.add('fly');
    hop();
    clearTimeout(shareBtn._t);
    shareBtn._t=setTimeout(()=>{ shareBtn.classList.remove('fly'); shareBtn.classList.add('fly-back'); }, duration);
  }

  assistant.addEventListener('click',()=>{
    showPanel(playerName?`Hey ${playerName}!`:'Hey there!',rand(['Want a tip?','Ready to share?','Check your high score!']));
    flyOutShare(); // fly out automatically
  });

  shareBtn.addEventListener('click',async()=>{
    const text=playerName?`${playerName} says: Come beat my score! ðŸŽ®`:'Join me in this fun challenge!';
    const payload={title:'Play this cute game!', text, url:window.location.href};
    try{
      if(navigator.share) await navigator.share(payload);
      else await navigator.clipboard.writeText(window.location.href);
      speak('Thanks for sharing! ðŸŽ‰',4200);
    }catch(e){ speak('Sharing not available',3000);}
    shareBtn.classList.remove('fly');
    shareBtn.classList.add('fly-back');
    localStorage.setItem(KEY_SHARED,'yes');
  });

  closeBtn.addEventListener('click',()=>hidePanel());
  tipBtn.addEventListener('click',()=>{ panelText.innerHTML=`<b>Tip:</b> ${rand(tips)}`; });

  assistant.tabIndex=0; assistant.addEventListener('keydown',(e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); assistant.click(); } });

})();
	</script>
	

<script>
  // ========================================
  // REGISTER SERVICE WORKER â€” FULL PWA
  // ========================================
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js')
        .then(reg => {
          console.log('âœ… SW registered:', reg.scope);
          
          // Auto-update prompt
          reg.addEventListener('updatefound', () => {
            const newWorker = reg.installing;
            newWorker.addEventListener('statechange', () => {
              if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                if (confirm('ðŸŽ® New version available! Reload for updates?')) {
                  newWorker.postMessage({ action: 'skipWaiting' });
                }
              }
            });
          });
        })
        .catch(err => console.log('âŒ SW failed:', err));
    });

    // Reload on update
    navigator.serviceWorker.addEventListener('controllerchange', () => {
      window.location.reload();
    });
  }
</script>

<style>
/* ===== Install Popup Animation ===== */
#autoInstallBox {
    opacity: 0;
    transform: translate(-50%, 20px);
    transition: all 0.6s ease;
}

#autoInstallBox.show {
    opacity: 1;
    transform: translate(-50%, 0);
    animation: bounceIn 0.6s ease-out;
}

@keyframes bounceIn {
    0% { transform: translate(-50%, 40px); }
    60% { transform: translate(-50%, -5px); }
    100% { transform: translate(-50%, 0); }
}
</style>

<!-- ===== AUTO INSTALL POPUP ===== -->
<div id="autoInstallBox" style="
    display:none;
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #111;
    color: #fff;
    padding: 15px 20px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.4);
    z-index: 999999;
    text-align: center;
    font-size: 16px;
">
    <div style="margin-bottom: 10px;">
        Install this game for faster play & offline access!
    </div>

    <button id="autoInstallBtn" style="
        background: #1e90ff;
        border: none;
        color: white;
        padding: 10px 18px;
        border-radius: 8px;
        font-size: 15px;
        cursor: pointer;
    ">
        Install Now
    </button>
</div>

<script>
/* ===== Install Prompt Logic ===== */
let deferredPrompt = null;
let popupShown = false;

window.addEventListener("beforeinstallprompt", (e) => {
    e.preventDefault();
    deferredPrompt = e;

    if (!popupShown) {
        setTimeout(showPopup, 2000); // show after 2 seconds
    }
});

function showPopup() {
    if (deferredPrompt) {
        const box = document.getElementById("autoInstallBox");
        box.style.display = "block";

        // Start animation
        setTimeout(() => {
            box.classList.add("show");
        }, 20);

        popupShown = true;

        // Re-show every 10 seconds until installed
        setTimeout(() => {
            if (deferredPrompt) showPopup();
        }, 10000);
    }
}

document.getElementById("autoInstallBtn").addEventListener("click", () => {
    if (!deferredPrompt) return;

    deferredPrompt.prompt();
    deferredPrompt = null;
    hidePopup();
});

// Hide forever once installed
window.addEventListener("appinstalled", () => {
    deferredPrompt = null;
    hidePopup();
});

function hidePopup() {
    const box = document.getElementById("autoInstallBox");
    box.classList.remove("show");

    setTimeout(() => {
        box.style.display = "none";
    }, 600);
}
</script>





	
	<script>
// ===================== Performance Helper for Swipe Match-3 =====================

// FPS monitor (optional, helps see if game drops frames)
(function() {
    let last = performance.now();
    let frames = 0;
    function fpsMonitor() {
        const now = performance.now();
        frames++;
        if (now - last >= 1000) {
            console.log("FPS:", frames);
            frames = 0;
            last = now;
        }
        requestAnimationFrame(fpsMonitor);
    }
    fpsMonitor();
})();

// Hardware acceleration helper for tiles
function accelerateTiles(tileSelector) {
    const tiles = document.querySelectorAll(tileSelector);
    tiles.forEach(tile => {
        tile.style.transform = "translate3d(0,0,0)";
        tile.style.willChange = "transform";
    });
}

// Smooth animation wrapper using requestAnimationFrame
function animateTile(tile, targetX, targetY, duration = 300, callback) {
    const startX = tile.offsetLeft;
    const startY = tile.offsetTop;
    const deltaX = targetX - startX;
    const deltaY = targetY - startY;
    const startTime = performance.now();

    function step(now) {
        const elapsed = now - startTime;
        const progress = Math.min(elapsed / duration, 1);
        tile.style.transform = `translate3d(${deltaX*progress}px, ${deltaY*progress}px, 0)`;
        if (progress < 1) {
            requestAnimationFrame(step);
        } else {
            if (callback) callback();
        }
    }
    requestAnimationFrame(step);
}

// Throttle expensive game updates (e.g., combo checks)
function throttle(fn, limit = 50) {
    let lastCall = 0;
    return function(...args) {
        const now = performance.now();
        if (now - lastCall >= limit) {
            lastCall = now;
            fn.apply(this, args);
        }
    }
}

// ===================== Usage Examples =====================

// 1. Accelerate all tiles
accelerateTiles(".tile"); // replace ".tile" with your tile class

// 2. Animate a tile smoothly
// animateTile(document.querySelector(".tile"), 200, 300, 300);

// 3. Throttle heavy functions
// const checkCombosThrottled = throttle(checkCombos, 50);

</script>

<!-- GAME SCRIPT -->
<script type="module" src="./script.js"></script>

<script src="./menja/dist/ads.js"></script>  <!-- Your fixed script -->


<!-- Monetag main JS -->
<script src="https://js.monetag.com/ef7c500bcbab5c68feaab4175d9cfc13.js"></script>

<!-- Push Banner -->
<script>
  (function(s){
    s.dataset.zone='10203402';
    s.src='https://nap5k.com/tag.min.js';
  })([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')));
</script>

<!-- Vignette / Fullscreen -->
<script>
  (function(s){
    s.dataset.zone='10203415';
    s.src='https://groleegni.net/vignette.min.js';
  })([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')));
	</script>

	
</body>
</html>
